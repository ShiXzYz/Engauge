{% extends 'polls/base.html' %}
{% block title %}Manage polls{% endblock %}
{% block content %}
  <h2>Polls</h2>
  <p>Share the "Student link" with your class to let them vote; open "Results" to view responses.</p>
  <table border="1" cellpadding="6" cellspacing="0">
    <thead>
      <tr>
        <th>Question</th>
        <th>Type</th>
        <th>Created</th>
        <th>Active</th>
        <th>Student link</th>
        <th>Results</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
    {% for p in polls %}
      <tr>
        <td>{{ p.question_text|truncatechars:100 }}</td>
        <td>{{ p.get_question_format_display }}</td>
        <td>{{ p.created_at|date:"M d, Y" }}</td>
        <td>{{ p.active|yesno:"Yes,No" }}</td>
        <td><a href="{% url 'polls:poll_display' poll_id=p.id %}" target="_blank">Open</a></td>
        <td><a href="{% url 'polls:poll_results' poll_id=p.id %}">Results</a></td>
        <td>
          <form method="post" action="{% url 'polls:delete_poll' poll_id=p.id %}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this poll?');">
            {% csrf_token %}
            <button type="submit" style="color:red;">Delete</button>
          </form>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="7">No polls yet. Accept questions from a document to create polls.</td></tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}
